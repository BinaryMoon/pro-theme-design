Raphael.colorwheel=function(t,r,e){function o(t,r){return{x:t,y:r}}function u(t){return t*(Math.PI/180)}function c(t,r){var n=t>0?0:180;return n+180*Math.atan((0-r)/(0-t))/Math.PI}function a(t,r){return P=r,Y=P/20,C=P/2,J=$(t),A=Raphael(J[0],P,P),A.safari(),W(),L(),X.cursor=d(Y),S.cursor=d(.5*Y),b(),J.css({height:P+"px",width:P+"px"}),s(J),i()}function s(t){$(t).css({unselectable:"on","-moz-user-select":"none","-webkit-user-select":"none"})}function i(){return{input:l,onchange:f,ondrag:h,color:F,color_hsb:k}}function l(t){return K=null,q=t,$(t).keyup(function(){this.value.match(/^#([0-9A-F]){3}$|^#([0-9A-F]){6}$/gim)&&(w(this.value),M(!0),z())}),w(t.value),M(!0),i()}function f(t){return K=t,M(!1),i()}function h(t,r){return N=[t||function(){},r||function(){}],i()}function v(t){var r,n,e;return t.preventDefault(),e=t.originalEvent.touches?t.originalEvent.touches[0]:t,r=e.pageX-(J.offset().left+C),n=e.pageY-(J.offset().top+C),j==X?(R(r,n),M(),z(),!0):j==S?(g(r,n),M(),z(),!0):void 0}function p(t,r){t.preventDefault(),$(document).on("mouseup touchend",m),$(document).on("mousemove touchmove",v),j=r,v(t),N[0](B)}function m(t){t.preventDefault(),$(document).off("mouseup touchend",m),$(document).off("mousemove touchmove",v),N[1](B),z()}function b(){$([X.event.node,X.cursor[0].node]).on("mousedown touchstart",function(t){p(t,X)}),$([S.b.node,S.cursor[0].node]).on("mousedown touchstart",function(t){p(t,S)})}function d(t){var r=A.set().push(A.circle(0,0,t).attr({"stroke-width":4,stroke:"#333"}),A.circle(0,0,t+2).attr({"stroke-width":1,stroke:"#FFF",opacity:.5}));return r[0].node.style.cursor="crosshair",r}function g(t,r){t+=C,r+=C,t<T.x&&(t=T.x),t>T.x+T.l&&(t=T.x+T.l),r<T.y&&(r=T.y),r>T.y+T.l&&(r=T.y+T.l),S.cursor.attr({cx:t,cy:r}).transform("t0,0")}function y(t){var r=Raphael.getRGB(t).hex;S.h.attr("fill",r)}function x(){return Raphael.rgb2hsb(S.h.attr("fill")).h}function F(t){var r=w(t,!1);return M(!1),r}function k(t){var r=w(t,!0);return M(!1),r}function w(t,r){if(void 0===t)return r?I:B;var n,e;if(r){n=t,void 0===n.b&&(n.b=n.v);var o=A.raphael.hsb2rgb(n.h,n.s,n.b);e=o.hex}else e=t,n=A.raphael.rgb2hsb(e);var u=A.rect(1,1,1,1).attr({fill:e});return g(0-T.l/2+T.l*n.s,T.l/2-T.l*n.b),R(360*n.h-90),u.remove(),i()}function M(t){var r=S.cursor.items[0].attr("cx"),n=S.cursor.items[0].attr("cy"),e={b:1-(n-T.y)/T.l,s:(r-T.x)/T.l,h:x()};if(I=e,B=Raphael.hsb2rgb(e.h,e.s,e.b),q){var o=B.hex;t!==!0&&(q.value=o),e.b<.5?$(q).css("color","#FFF"):$(q).css("color","#000"),q.style.background=o}}function R(t){var r;r=2==arguments.length?c(arguments[0],arguments[1]):arguments[0];var n=Math.cos(u(r))*(C-Y-Q),e=Math.sin(u(r))*(C-Y-Q);X.cursor.attr({cx:n+C,cy:e+C}).transform("t0,0"),y("hsb("+(r+90)/360+",1,1)")}function E(){if(T)return T;var t=P-4*Y;return T={x:t/6+2*Y+Q,y:t/6+2*Y+Q,l:2*t/3-2*Q}}function W(){E(),box=[T.x,T.y,T.l,T.l],S.h=A.rect.apply(A,box).attr({stroke:"#EEE",gradient:"0-#FFF-#000",opacity:1}),S.s=A.rect.apply(A,box).attr({stroke:null,gradient:"0-#FFF-#FFF",opacity:0}),S.b=A.rect.apply(A,box).attr({stroke:null,gradient:"90-#000-#FFF",opacity:0}),S.b.node.style.cursor="crosshair"}function D(){var t="M -@W 0 L @W 0 L @W @H L -@W @H z";return t.replace(/@H/gim,2*Y).replace(/@W/gim,Y)}function H(t,r,n){var e=t.clone(),o=r*(255/n),u=P/2,c=Y,a=Q;e.transform("t"+u+","+(u-c)+"r"+360/n*r+"t0,-"+(u-c-a)),e.attr({"stroke-width":0,fill:"hsb("+r*(1/n)+", 1, 0.85)"}),X.hues.push(e)}function L(){var t=D(),r=A.path(t).attr({stroke:"rgba(0,0,0,0)"}).transform("t"+P/2+","+Q),e=G;for(X.hues=A.set(),n=0;n<e;n++)H(r,n,e);X.event=A.circle(C,C,C-Y-Q).attr({"stroke-width":2*Y,opacity:.01}),X.outline=A.circle(C,C,C-Y-Q).attr({stroke:"#000","stroke-width":2*Y+3,opacity:.1}),X.outline.toBack(),X.event.node.style.cursor="crosshair"}function z(){({}).toString.call(K).match(/function/i)&&K(B)}var A,B,I,P,G=e||60,S={},X={},Y,_={},j,q,C,J,K,N=[function(){},function(){}],O,Q=2,T;return a(t,r)};